---
import Layout from '../layouts/Layout.astro';
import { getCompanyList, getCompanyData } from '../utils/git-data.js';

export const getStaticPaths = async () => {
  const companies = await getCompanyList();
  return companies.map(companyId => ({
    params: { id: companyId }
  }));
}

const { id = "joblist-today" } = Astro.params;

// Fetch company data for enhanced SEO using git
const companyData = await getCompanyData(id);
---
<Layout
  title={companyData?.title ? `${companyData.title} careers & jobs` : `${id} careers & jobs`}
  description={companyData?.description || `Current job openings at ${id}. Browse available positions, company culture, and hiring information. Find your next career opportunity with ${id}.`}
  companyId={id}
  companyData={companyData}
>
  <joblist-today company-id={id}></joblist-today>
</Layout>
